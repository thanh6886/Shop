import{h as B,j as e,L as j,p as c,d as x,e as w,u as b,a as L,C as N,f as A,o as C,g as P,k as M,m as y,W as F}from"./index-187f8b77.js";import{P as W,p as G}from"./Product-49a8aa9b.js";import{B as k}from"./Button-816b9e9d.js";import{I as _}from"./InputNumber-6393f7be.js";const T={getCategories(){return B.get("categories")}},m=2;function R({queryConfig:r,pageSize:t}){const s=Number(r.page),d=()=>{let h=!1,p=!1;const a=u=>p?null:(p=!0,e.jsx("span",{className:"mx-2 rounded border bg-white px-3 py-2 shadow-sm",children:"..."},u)),g=u=>h?null:(h=!0,e.jsx("span",{className:"mx-2 rounded border bg-white px-3 py-2 shadow-sm",children:"..."},u));return Array(t).fill(0).map((u,n)=>{const o=n+1;if(s<=m*2+1&&o>s+m&&o<t-m+1)return g(n);if(s>m*2+1&&s<t-m*2){if(o<s-m&&o>m)return a(n);if(o>s+m&&o<t-m+1)return g(n)}else if(s>=t-m*2&&o>m&&o<s-m)return a(n);return e.jsx(j,{to:{pathname:c.home,search:x({...r,page:o.toString()}).toString()},className:w("mx-2 cursor-pointer rounded border bg-white px-3 py-2 shadow-sm",{"border-cyan-500":o===s,"border-transparent":o!==s}),children:o},n)})};return e.jsxs("div",{className:"mt-6 flex flex-wrap justify-center",children:[s===1?e.jsx("span",{className:"mx-2 cursor-not-allowed rounded border bg-white/60 px-3 py-2  shadow-sm",children:"Prev"}):e.jsx(j,{to:{pathname:c.home,search:x({...r,page:(s-1).toString()}).toString()},className:"mx-2 cursor-pointer rounded border bg-white px-3 py-2  shadow-sm",children:"Prev"}),d(),s===t?e.jsx("span",{className:"mx-2 cursor-not-allowed rounded border bg-white/60 px-3 py-2  shadow-sm",children:"Next"}):e.jsx(j,{to:{pathname:c.home,search:x({...r,page:(s+1).toString()}).toString()},className:"mx-2 cursor-pointer rounded border bg-white px-3 py-2  shadow-sm",children:"Next"})]})}function D({queryConfig:r}){const t=b(),s=d=>{t({pathname:c.home,search:x({...r,rating_filter:String(d),page:"1"}).toString()})};return e.jsx("ul",{className:"my-3",children:Array(5).fill(0).map((d,h)=>e.jsx("li",{className:"py-1 pl-2",children:e.jsxs("div",{className:"flex cursor-pointer items-center text-sm",onClick:()=>s(5-h),tabIndex:0,role:"button","aria-hidden":"true",children:[Array(5).fill(0).map((p,a)=>a<5-h?e.jsxs("svg",{viewBox:"0 0 9.5 8",className:"mr-1 h-4 w-4",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"ratingStarGradient",x1:"50%",x2:"50%",y1:"0%",y2:"100%",children:[e.jsx("stop",{offset:0,stopColor:"#ffca11"}),e.jsx("stop",{offset:1,stopColor:"#ffad27"})]}),e.jsx("polygon",{id:"ratingStar",points:"14.910357 6.35294118 12.4209136 7.66171903 12.896355 4.88968305 10.8823529 2.92651626 13.6656353 2.52208166 14.910357 0 16.1550787 2.52208166 18.9383611 2.92651626 16.924359 4.88968305 17.3998004 7.66171903"})]}),e.jsx("g",{fill:"url(#ratingStarGradient)",fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e.jsx("g",{transform:"translate(-876 -1270)",children:e.jsx("g",{transform:"translate(155 992)",children:e.jsx("g",{transform:"translate(600 29)",children:e.jsx("g",{transform:"translate(10 239)",children:e.jsx("g",{transform:"translate(101 10)",children:e.jsx("use",{stroke:"#ffa727",strokeWidth:".5",xlinkHref:"#ratingStar"})})})})})})})]},a):e.jsxs("svg",{viewBox:"0 0 30 30",className:"mr-1 h-4 w-4",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"star__hollow",x1:"50%",x2:"50%",y1:"0%",y2:"99.0177926%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFD211"}),e.jsx("stop",{offset:"100%",stopColor:"#FFAD27"})]})}),e.jsx("path",{fill:"none",fillRule:"evenodd",stroke:"url(#star__hollow)",strokeWidth:2,d:"M23.226809 28.390899l-1.543364-9.5505903 6.600997-6.8291523-9.116272-1.4059447-4.01304-8.63019038-4.013041 8.63019038-9.116271 1.4059447 6.600997 6.8291523-1.543364 9.5505903 8.071679-4.5038874 8.071679 4.5038874z"})]},a)),h!==0&&e.jsx("span",{className:"text-sm ml-1",children:"Trở lên"})]})},h))})}function I({queryConfig:r,categories:t}){var v;const{category:s}=r,d=b(),{control:h,handleSubmit:p,trigger:a,formState:{errors:g},reset:u}=L({defaultValues:{price_min:"",price_max:""},resolver:C(P)}),n=p(l=>{d({pathname:c.home,search:x({...r,price_max:l.price_max,price_min:l.price_min}).toString()})}),o=()=>{d({pathname:c.home,search:x(A(r,["price_min","price_max","rating_filter","category"])).toString()}),u()};return e.jsxs("div",{className:"py-4",children:[e.jsxs(j,{to:c.home,className:w("flex items-center font-bold",{"text-orange":!s}),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-3 fill-current",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"})}),"Tất cả danh mục"]}),e.jsx("div",{className:"my-4 h-[1px] bg-gray-300"}),e.jsx("ul",{children:t.map(l=>{const f=s===l._id;return e.jsx("li",{className:"py-2 pl-2 m-1 border-b border-x border-gray-500  transition-transform transform hover:scale-105 ",children:e.jsxs(j,{to:{pathname:c.home,search:x({...r,category:l._id,page:"1"}).toString()},className:w("relative px-2",{"font-semibold text-orange":f}),children:[f&&e.jsx("svg",{viewBox:"0 0 4 7",className:"absolute top-1 left-[-10px] h-3 w-3 fill-orange",children:e.jsx("polygon",{points:"4 3.5 0 0 0 7"})}),l.name]})},l._id)})}),e.jsxs(j,{to:c.home,className:"mt-4 flex items-center font-bold uppercase text-sm",children:[e.jsx("svg",{enableBackground:"new 0 0 15 15",viewBox:"0 0 15 15",x:0,y:0,className:"mr-3 h-4 w-3 fill-current stroke-current",children:e.jsx("g",{children:e.jsx("polyline",{fill:"none",points:"5.5 13.2 5.5 5.8 1.5 1.2 13.5 1.2 9.5 5.8 9.5 10.2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10})})}),"Bộ lọc tìm kiếm"]}),e.jsx("div",{className:"my-4 h-[1px] bg-gray-300"}),e.jsx("div",{className:"my-5",children:e.jsxs("form",{className:"mt-2",onSubmit:n,children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(N,{control:h,name:"price_min",render:({field:l})=>e.jsx(_,{type:"text",className:"grow",placeholder:"₫ TỪ",classNameInput:"p-1 w-full outline-none border border-gray-300 focus:border-gray-500 rounded-sm focus:shadow-sm",classNameError:"hidden",...l,onChange:f=>{l.onChange(f),a("price_max")}})}),e.jsx("div",{className:"mx-2 mt-2 shrink-0",children:"-"}),e.jsx(N,{control:h,name:"price_max",render:({field:l})=>e.jsx(_,{type:"text",className:"grow",placeholder:"₫ ĐẾN",classNameInput:"p-1 w-full outline-none border border-gray-300 focus:border-gray-500 rounded-sm focus:shadow-sm",classNameError:"hidden",...l,onChange:f=>{l.onChange(f),a("price_min")}})})]}),e.jsx("div",{className:"mt-1 min-h-[1.25rem] text-center text-sm text-red-600",children:(v=g.price_min)==null?void 0:v.message}),e.jsx(k,{className:"flex w-full items-center justify-center bg-orange p-2 text-sm uppercase text-white hover:bg-orange/80",children:"Áp dụng"})]})}),e.jsx("div",{className:"my-4 h-[1px] bg-gray-300"}),e.jsx("div",{className:"text-xl ml-3",children:"Đánh giá"}),e.jsx(D,{queryConfig:r}),e.jsx("div",{className:"my-4 h-[1px] bg-gray-300"}),e.jsx(k,{onClick:o,className:"flex w-full items-center justify-center bg-orange p-2 text-sm uppercase text-white hover:bg-orange/80",children:"Xóa tất cả"})]})}const i={createdAt:"createdAt",view:"view",sold:"sold",price:"price"},S={asc:"asc",desc:"desc"};function E({queryConfig:r,pageSize:t}){const s=Number(r.page),{sort_by:d=i.createdAt,order:h}=r,p=b(),a=n=>d===n,g=n=>{p({pathname:c.home,search:x(A({...r,sort_by:n,page:"1"},["order"])).toString()})},u=n=>{p({pathname:c.home,search:x({...r,sort_by:i.price,order:n,page:"1"}).toString()})};return e.jsx("div",{className:"bg-gray-300/40 py-4 px-3",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{children:"Sắp xếp theo"}),e.jsx("button",{className:w("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":a(i.view),"bg-white text-black hover:bg-slate-100":!a(i.view)}),onClick:()=>g(i.view),children:"Phổ biến"}),e.jsx("button",{className:w("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":a(i.createdAt),"bg-white text-black hover:bg-slate-100":!a(i.createdAt)}),onClick:()=>g(i.createdAt),children:"Mới nhất"}),e.jsx("button",{className:w("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":a(i.sold),"bg-white text-black hover:bg-slate-100":!a(i.sold)}),onClick:()=>g(i.sold),children:"Bán chạy"}),e.jsxs("select",{className:w("h-8  px-4 text-left text-sm capitalize  outline-none ",{"bg-orange text-white hover:bg-orange/80":a(i.price),"bg-white text-black hover:bg-slate-100":!a(i.price)}),value:h||"",onChange:n=>u(n.target.value),children:[e.jsx("option",{value:"",disabled:!0,className:"bg-white text-black",children:"Giá"}),e.jsx("option",{value:S.asc,className:"bg-white text-black",children:"Giá: Thấp đến cao"}),e.jsx("option",{value:S.desc,className:"bg-white text-black",children:"Giá: Cao đến thấp"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange",children:s}),e.jsxs("span",{children:["/",t]})]}),e.jsxs("div",{className:"ml-2 flex",children:[s===1?e.jsx("span",{className:"flex h-8 w-9 cursor-not-allowed items-center justify-center rounded-tl-sm rounded-bl-sm bg-white/60  shadow hover:bg-slate-100",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-3 w-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}):e.jsx(j,{to:{pathname:c.home,search:x({...r,page:(s-1).toString()}).toString()},className:"flex h-8 w-9  items-center justify-center rounded-tl-sm rounded-bl-sm bg-white  shadow hover:bg-slate-100",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-3 w-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),s===t?e.jsx("span",{className:"flex h-8 w-9 cursor-not-allowed items-center justify-center rounded-tl-sm rounded-bl-sm bg-white/60  shadow hover:bg-slate-100",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-3 w-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}):e.jsx(j,{to:{pathname:c.home,search:x({...r,page:(s+1).toString()}).toString()},className:"flex h-8 w-9  items-center justify-center rounded-tl-sm rounded-bl-sm bg-white  shadow hover:bg-slate-100",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-3 w-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})]})]})})}function O(){const r=M(),{data:t}=y({queryKey:["products",r],queryFn:()=>G.getProducts(r),keepPreviousData:!0,staleTime:3*60*1e3}),{data:s}=y({queryKey:["categories"],queryFn:()=>T.getCategories()});return e.jsxs("div",{className:"bg-gray-200 py-6",children:[e.jsxs(F,{children:[e.jsx("title",{children:"Trang chủ | Shope"}),e.jsx("meta",{name:"description",content:"Trang chủ"})]}),e.jsx("div",{className:"container",children:t&&e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-3",children:e.jsx(I,{queryConfig:r,categories:(s==null?void 0:s.data.data)||[]})}),e.jsxs("div",{className:"col-span-9",children:[e.jsx(E,{queryConfig:r,pageSize:t.data.data.pagination.page_size}),e.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:t.data.data.products.map(d=>e.jsx("div",{className:"col-span-1",children:e.jsx(W,{product:d})},d._id))}),e.jsx(R,{queryConfig:r,pageSize:t.data.data.pagination.page_size})]})]})})]})}export{O as default};
