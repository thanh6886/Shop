'use strict';

var m = require('react');
var managerApi = require('@storybook/manager-api');
var components = require('@storybook/components');
var theming = require('@storybook/theming');
var reactInspector = require('react-inspector');
var coreEvents = require('@storybook/core-events');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var m__default = /*#__PURE__*/_interopDefault(m);

var s="storybook/react-router-v6",E=`${s}/panel`,l="reactRouter",e={CLEAR:`${s}/clear`,NAVIGATION:`${s}/navigation`,STORY_LOADED:`${s}/story-loaded`,ROUTE_MATCHES:`${s}/route-matches`,ACTION_INVOKED:`${s}/action_invoked`,ACTION_SETTLED:`${s}/action_settled`,LOADER_INVOKED:`${s}/loader_invoked`,LOADER_SETTLED:`${s}/loader_settled`};var c=theming.styled.div({display:"flex",padding:0,borderLeft:"5px solid transparent",borderBottom:"1px solid transparent",transition:"all 0.1s",alignItems:"flex-start",whiteSpace:"pre"});var A=theming.withTheme(({theme:t,...r})=>m__default.default.createElement(reactInspector.ObjectInspector,{theme:t.addonActionsTheme||"chromeLight",...r}));var d=theming.styled.div({flex:1,padding:"0 0 0 5px"});var R=components.ScrollArea,T=({navigationEvents:t,onClear:r})=>m__default.default.createElement(m.Fragment,null,m__default.default.createElement(f,{title:"reactRouterLogger"},t.map(i=>m__default.default.createElement(c,{key:i.key},m__default.default.createElement(d,null,m__default.default.createElement(A,{name:g[i.type],data:i.data,showNonenumerable:!1,sortObjectKeys:!1,expandPaths:["$.routeParams","$.searchParams","$.routeMatches.*","$.routeMatches.*.*","$.matches","$.matches.*","$.matches.*.*"]}))))),m__default.default.createElement(components.ActionBar,{actionItems:[{title:"Clear",onClick:r}]})),g={[e.NAVIGATION]:"Navigate",[e.STORY_LOADED]:"Story rendered",[e.ROUTE_MATCHES]:"New route matches",[e.ACTION_INVOKED]:"Action invoked",[e.ACTION_SETTLED]:"Action settled",[e.LOADER_INVOKED]:"Loader invoked",[e.LOADER_SETTLED]:"Loader settled"},f=theming.styled(({children:t,title:r})=>m__default.default.createElement(R,{horizontal:!0,vertical:!0,title:r},t))({margin:0,padding:"10px 5px 20px"});f.displayName="Wrapper";var O=t=>{let r=m.useRef(0),[i,o]=m.useState([]);managerApi.useChannel({[e.ROUTE_MATCHES]:a=>{o(n=>[...n,{...a,key:r.current++}]);},[e.NAVIGATION]:a=>{o(n=>[...n,{...a,key:r.current++}]);},[e.STORY_LOADED]:a=>{o(n=>[...n,{...a,key:r.current++}]);},[e.ACTION_INVOKED]:a=>{o(n=>[...n,{...a,key:r.current++}]);},[e.ACTION_SETTLED]:a=>{o(n=>[...n,{...a,key:r.current++}]);},[e.LOADER_INVOKED]:a=>{o(n=>[...n,{...a,key:r.current++}]);},[e.LOADER_SETTLED]:a=>{o(n=>[...n,{...a,key:r.current++}]);},[coreEvents.STORY_CHANGED]:()=>{o([]);}});let p=()=>{t.api.emit(e.CLEAR),o([]);};return m__default.default.createElement(components.AddonPanel,{...t},m__default.default.createElement(T,{navigationEvents:i,onClear:p}))};managerApi.addons.register(s,t=>{managerApi.addons.add(E,{type:managerApi.types.PANEL,paramKey:l,title:()=>{let[r,i]=m.useState(0),o=()=>i(n=>n+1),p=()=>i(0);return m.useEffect(()=>(t.on(coreEvents.STORY_CHANGED,p),t.on(e.ROUTE_MATCHES,o),t.on(e.NAVIGATION,o),t.on(e.ACTION_INVOKED,o),t.on(e.ACTION_SETTLED,o),t.on(e.LOADER_INVOKED,o),t.on(e.LOADER_SETTLED,o),t.on(e.CLEAR,p),()=>{t.off(coreEvents.STORY_CHANGED,p),t.off(e.ROUTE_MATCHES,o),t.off(e.NAVIGATION,o),t.off(e.ACTION_INVOKED,o),t.off(e.ACTION_SETTLED,o),t.off(e.LOADER_INVOKED,o),t.off(e.LOADER_SETTLED,o),t.off(e.CLEAR,p);})),`React Router${r===0?"":` (${r})`}`},match:({viewMode:r})=>r==="story",render:({active:r,key:i})=>m__default.default.createElement(O,{active:r||!1,key:i,api:t})});});
//# sourceMappingURL=out.js.map
//# sourceMappingURL=manager.js.map